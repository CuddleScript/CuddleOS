---
# My own Shizz

- name: Create the `aur_builder` user
  become: yes
  ansible.builtin.user:
     name: aur_builder
     create_home: yes
     group: wheel

- name: Allow the `aur_builder` user to run `sudo pacman` without a password
  become: yes
  ansible.builtin.lineinfile:
     path: /etc/sudoers.d/11-install-aur_builder
     line: 'aur_builder ALL=(ALL) NOPASSWD: /usr/bin/pacman'
     create: yes
     mode: 0644
     validate: 'visudo -cf %s'

- name: Install Misc Packages
  include_vars:
     file: '../lists/sarah_lists.yml'

- name: Install Basic Packages
  kewlfft.aur.aur:
     use: yay
     name: '{{ misc_packages }}'
     state: present

- name: Enable Misc Package Services
  ansible.builtin.service:
     name: '{{ misc_services }}'
     enabled: yes

- name: Disable Systemd-oomd
  ansible.builtin.service:
     name: 'systemd-oomd'
     enabled: no
